<!DOCTYPE html>
<html lang="zh-CN" class="antialiased scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æµå…‰å­˜æ ¹ | Digital Garden v62.4 RESTORED</title>
    
    <!-- æ ¸å¿ƒ CSS å¼•æ“ -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        leviathan: {
                            bg: '#0c0b0a',
                            surface: 'var(--surface-color)',
                            border: 'var(--border-color)',
                            accent: '#e3b341',
                        }
                    },
                    fontFamily: {
                        serif: ['"Noto Serif SC"', 'serif'],
                        mono: ['"JetBrains Mono"', 'monospace'],
                    },
                    animation: {
                        'fade-in-pro': 'fadeIn 1s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'slide-up': 'slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'dash': 'dash 2.5s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        slideUp: { '0%': { opacity: '0', transform: 'translateY(15px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        dash: { from: { strokeDashoffset: '1000' }, to: { strokeDashoffset: '0' } }
                    }
                }
            }
        }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200;400;700&family=JetBrains+Mono:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    
    <style>
        :root {
            --glass-blur: 16px; 
            --amber-primary: #e3b341;
            --surface-color: rgba(20, 25, 30, 0.65);
            --border-color: rgba(255, 255, 255, 0.08);
        }

        html { background-color: #0c0b0a; margin: 0; overflow-x: hidden; }
        
        body { 
            background: #020617; 
            color: #ffffff; min-height: 100vh; font-family: "Noto Serif SC", serif;
        }

        /* èƒŒæ™¯å±‚ */
        .bg-layer {
            position: fixed; inset: 0; 
            background-size: cover; background-position: center;
            background-repeat: no-repeat;
            transition: opacity 3s ease-in-out;
            pointer-events: none;
            z-index: -50;
            filter: brightness(0.7) contrast(1.1) saturate(0.8);
        }
        
        #time-color-filter {
            position: fixed; inset: 0; pointer-events: none; z-index: -45;
            transition: background-color 5s ease;
        }

        canvas {
            position: fixed; inset: 0; pointer-events: none; z-index: -40;
        }

        .vignette {
            position: fixed; inset: 0; z-index: -35;
            background: radial-gradient(circle at center, rgba(0,0,0,0) 20%, rgba(2, 6, 23, 0.7) 100%);
            pointer-events: none;
        }

        .layout-container {
            max-width: 1440px; margin: 0 auto; padding: 5rem 2rem;
            position: relative; z-index: 10;
        }

        /* ç»ç’ƒæ‹Ÿæ€ */
        .glass-cell {
            background: rgba(20, 25, 30, 0.6); 
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 32px; padding: 2rem;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative; overflow: hidden;
        }
        .glass-cell:hover {
            border-color: rgba(227, 179, 65, 0.4);
            transform: translateY(-2px);
            background: rgba(30, 40, 55, 0.75);
            box-shadow: 0 40px 80px -20px rgba(0, 0, 0, 0.7);
        }

        .titan-matrix {
            display: grid; gap: 1.5rem; grid-template-columns: repeat(1, 1fr);
        }

        @media (min-width: 1024px) {
            .titan-matrix {
                grid-template-columns: repeat(4, 1fr);
                grid-template-rows: 240px 240px auto auto auto; 
                padding-bottom: 8rem;
            }
            .card-m1 { grid-column: 1 / span 2; grid-row: 1 / span 2; }
            .card-m3 { grid-column: 3 / span 2; grid-row: 1; }
            .card-m2 { grid-column: 3 / span 2; grid-row: 2; }
            .card-writing { grid-column: 1 / span 4; grid-row: 3; min-height: 380px; }
            .card-m5 { grid-column: 1 / span 4; grid-row: 4; }
            .card-m6 { grid-column: 1 / span 4; grid-row: 5; }
        }

        .precision-tag {
            font-family: 'JetBrains Mono', monospace;
            font-size: 9px; text-transform: uppercase;
            letter-spacing: 0.3em; color: rgba(255, 255, 255, 0.4); font-weight: 700;
        }

        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.15); border-radius: 10px; }

        .header-circle-btn {
            width: 44px; height: 44px; border-radius: 9999px;
            background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(20px); display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.3s ease;
        }
        .header-circle-btn:hover { border-color: rgba(227, 179, 65, 0.5); color: #e3b341; }

        .dropdown-menu {
            opacity: 0; visibility: hidden; transform: translateY(10px) scale(0.95);
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            position: absolute; top: 3.5rem; right: 0;
            background: rgba(12, 13, 17, 0.95); border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(24px); border-radius: 20px; padding: 1.5rem; z-index: 50; min-width: 280px;
        }
        .dropdown-menu.active { opacity: 1; visibility: visible; transform: translateY(0) scale(1); }

        /* å›¾è¡¨æ ·å¼ */
        .chart-wrapper { position: relative; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; }
        .pie-chart {
            width: 160px; height: 160px; border-radius: 50%;
            position: relative; flex-shrink: 0;
            transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .pie-chart::after { 
            content: ''; position: absolute; inset: 45px; 
            background: #111418; border-radius: 50%; 
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        .asset-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 1rem 1.5rem; background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.05); border-radius: 16px;
            transition: all 0.3s ease;
        }
        .asset-item:hover {
            transform: translateX(6px); background: rgba(227, 179, 65, 0.08);
            border-color: rgba(227, 179, 65, 0.3);
        }

        .fab-publish {
            position: fixed; bottom: 40px; right: 40px;
            width: 64px; height: 64px; background: var(--amber-primary);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 30px rgba(227, 179, 65, 0.3); color: #000; font-size: 24px;
            cursor: pointer; z-index: 100; transition: all 0.3s;
            opacity: 0; pointer-events: none; transform: scale(0.8);
        }
        .fab-publish.visible { opacity: 1; pointer-events: auto; transform: scale(1); }
    </style>
</head>
<body class="opacity-0 animate-fade-in-pro">

    <!-- ç¯å¢ƒæ„ŸçŸ¥èƒŒæ™¯ç³»ç»Ÿ -->
    <div id="bg-layer-1" class="bg-layer"></div>
    <div id="bg-layer-2" class="bg-layer" style="opacity:0"></div>
    <div id="time-color-filter"></div>
    <canvas id="sky-layer"></canvas>
    <canvas id="season-particles"></canvas>
    <div class="vignette"></div>

    <div class="layout-container">
        <!-- å¤´éƒ¨å¯¼èˆª -->
        <header class="flex flex-col lg:flex-row justify-between items-end gap-10 mb-20">
            <div class="w-full">
                <h1 class="text-5xl lg:text-7xl font-black tracking-[0.2em] font-serif mb-8 hover:text-amber-500 transition-all duration-1000 cursor-pointer" onclick="GardenOS.ui.search('')">æµå…‰å­˜æ ¹</h1>
                <div class="h-px w-64 bg-gradient-to-r from-amber-500/60 to-transparent mb-5"></div>
                <p class="text-xs lg:text-sm text-gray-400 italic font-serif opacity-80 tracking-[0.25em] leading-loose">
                    å…·ä½“çš„ç”Ÿæ´»ï¼Œæ˜¯æŠµå¾¡è™šæ— çš„æœ€åä¸€é“é˜²çº¿ã€‚
                </p>
            </div>
            
            <div class="flex flex-col items-end gap-5">
                <div id="clockDisplay" class="font-mono text-[14px] text-amber-500 font-bold tracking-[0.4em] mb-1">00:00:00</div>
                
                <div class="flex items-center gap-4 relative">
                    <!-- æœç´¢ -->
                    <div id="searchPill" class="header-circle-btn overflow-hidden w-11" onclick="GardenOS.ui.activateSearch()">
                        <i class="ri-search-line text-lg text-white/50"></i>
                        <input type="text" id="headerSearchInput" onkeyup="GardenOS.ui.search(this.value)" onblur="GardenOS.ui.deactivateSearch()" class="hidden w-full bg-transparent border-0 outline-none text-xs font-mono text-white ml-2" placeholder="SEARCH...">
                    </div>
                    <!-- AI -->
                    <div class="relative">
                        <div onclick="GardenOS.ui.toggleDropdown('aiMenu')" class="header-circle-btn text-white/50 hover:text-amber-500">
                             <i class="ri-brain-line text-lg"></i>
                        </div>
                        <div id="aiMenu" class="dropdown-menu">
                            <div class="flex items-center gap-2 mb-4">
                                <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                <span class="text-[10px] font-mono text-amber-500">DEEPSEEK_ONLINE</span>
                                <span id="aiUsageText" class="text-[9px] text-gray-500 ml-auto">0/15</span>
                            </div>
                            <div id="aiChatLog" class="h-48 overflow-y-auto custom-scroll mb-4 border border-white/5 rounded-xl p-3 bg-black/20 text-xs text-gray-300 font-serif leading-relaxed">
                                <span class="opacity-50">ç¥ç»é“¾è·¯å·²è¿æ¥ã€‚å°±ç»ªã€‚</span>
                            </div>
                            <input type="text" id="aiHeaderInput" onkeypress="GardenOS.api.handleAIInput(event)" class="w-full bg-white/5 border border-white/10 rounded-lg py-2 px-3 text-xs font-mono text-white outline-none" placeholder="Ask AI...">
                        </div>
                    </div>
                    <!-- å­£èŠ‚æŒ‡ç¤ºå™¨ -->
                    <div class="header-circle-btn text-white/50 cursor-default" id="seasonIndicator">
                         <span class="w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"></span>
                    </div>
                    <!-- ç™»å½• -->
                    <div onclick="GardenOS.ui.toggleLogin(true)" class="header-circle-btn text-white/50 hover:text-amber-500">
                         <i id="lockIcon" class="ri-user-3-line text-lg"></i>
                    </div>
                </div>
            </div>
        </header>

        <main class="titan-matrix">
            <!-- M1: ç”Ÿå‘½ä½“å¾ -->
            <div class="glass-cell card-m1 flex flex-col justify-between group h-full">
                <div>
                    <span class="precision-tag text-amber-500" id="envStatusText">Neural_Scale_v62.4</span>
                    <h2 class="text-4xl font-bold font-serif mt-12 mb-8 tracking-wide">ç”Ÿæ´»åˆ»åº¦</h2>
                    <div class="space-y-10">
                        <div>
                            <div class="flex justify-between text-[11px] font-mono opacity-40 mb-3 uppercase tracking-[0.5em]"><span>Entropy_Index</span><span id="valEntropy" class="text-amber-500 font-black">95.00%</span></div>
                            <div class="h-[1px] w-full bg-white/10 relative overflow-hidden"><div class="absolute h-full bg-white w-[95%] shadow-[0_0_20px_white]"></div></div>
                        </div>
                        <p id="valQuote" class="text-lg italic text-gray-300 font-serif leading-relaxed opacity-90 max-w-sm mt-8">â€œä¸‡ç‰©çš†æœ‰è£‚ç—•ï¼Œé‚£æ˜¯å…‰è¿›æ¥çš„åœ°æ–¹ã€‚â€</p>
                    </div>
                </div>
                <div class="flex gap-20 pt-10 border-t border-white/10">
                    <div><div class="text-3xl font-mono font-light tracking-tighter"><span id="valWeight">55.0</span> <span class="text-[10px] opacity-30 uppercase font-black">Kg</span></div><div class="precision-tag mt-3 opacity-50">Mass</div></div>
                    <div><div class="text-3xl font-mono font-light tracking-tighter"><span id="valVitality">98</span> <span class="text-[10px] opacity-30 uppercase font-black">En</span></div><div class="precision-tag mt-3 opacity-50">Vitality</div></div>
                </div>
            </div>

            <!-- M3: æ‘„å…¥è®°å½• -->
            <div class="glass-cell card-m3 flex flex-col justify-between">
                <div class="flex justify-between items-center mb-8"><span class="precision-tag text-white/40">// Ingest_Record</span><i class="ri-book-read-line text-white/20 text-xl"></i></div>
                <div class="overflow-y-auto custom-scroll h-full pr-3"><div id="ingestList" class="space-y-6"></div></div>
            </div>

            <!-- M2: ç¢ç¢å¿µ -->
            <div class="glass-cell card-m2 flex flex-col justify-start">
                <div class="flex justify-between items-center mb-6 pb-4 border-b border-white/10"><span class="precision-tag text-amber-500/60 tracking-widest">Fragmented_Echoes</span><i class="ri-chat-history-line text-white/20 text-xl"></i></div>
                <div id="memoList" class="w-full h-full overflow-y-auto custom-scroll pr-3 space-y-6 max-h-[160px]"></div>
            </div>

            <!-- Writing: å½’æ¡£ -->
            <div id="writingDeck" class="glass-cell card-writing flex flex-col justify-center items-center relative overflow-hidden group cursor-pointer" onclick="GardenOS.ui.toggleWritingDeck()">
                <div class="absolute inset-0 bg-black/60 group-hover:bg-black/40 transition-colors duration-1000"></div>
                <div id="writingCover" class="text-center relative z-10">
                    <i class="ri-quill-pen-line text-4xl text-amber-500 mb-10 block animate-pulse"></i>
                    <h3 class="text-3xl font-serif italic text-white mb-8 tracking-[0.2em] leading-loose">â€œæ–‡å­—æ˜¯æ•è·æ—¶é—´çš„ç½‘ï¼Œ<br>æ‰“ææ²‰æ²¡çš„å²æœˆã€‚â€</h3>
                    <span class="precision-tag tracking-[1em] text-white/20">Click to open archive</span>
                </div>
                <div id="writingList" class="hidden w-full max-w-5xl relative z-10 grid grid-cols-1 md:grid-cols-3 gap-10 p-8">
                    <!-- Writing content will be injected here -->
                    <div id="dynamicWritingContainer" class="contents"></div>
                </div>
            </div>

            <!-- M5: æ„Ÿå®˜å®éªŒå®¤ (å·²ä¿®å¤äº¤äº’) -->
            <div class="glass-cell card-m5">
                <div class="flex justify-between items-center mb-12"><span class="precision-tag text-white/30 tracking-[4em] uppercase">// Sensory_Laboratory</span><i class="ri-eye-2-line text-white/10 text-2xl"></i></div>
                <div id="sensoryGrid" class="grid grid-cols-2 md:grid-cols-5 gap-10">
                    <button onclick="GardenOS.ui.search('Anime')" class="flex flex-col items-center gap-5 group/btn cursor-pointer transition-transform hover:scale-105 active:scale-95"><div class="w-16 h-16 bg-white/[0.04] rounded-[24px] flex items-center justify-center text-4xl border border-white/5 group-hover/btn:bg-amber-500/20 shadow-xl transition-colors">â›©ï¸</div><span class="precision-tag opacity-40 group-hover/btn:opacity-100 text-amber-500/80">Anime</span></button>
                    <button onclick="GardenOS.ui.search('Game')" class="flex flex-col items-center gap-5 group/btn cursor-pointer transition-transform hover:scale-105 active:scale-95"><div class="w-16 h-16 bg-white/[0.04] rounded-[24px] flex items-center justify-center text-4xl border border-white/5 group-hover/btn:bg-amber-500/20 shadow-xl transition-colors">ğŸ•¹ï¸</div><span class="precision-tag opacity-40 group-hover/btn:opacity-100 text-amber-500/80">Game</span></button>
                    <button onclick="GardenOS.ui.search('Film')" class="flex flex-col items-center gap-5 group/btn cursor-pointer transition-transform hover:scale-105 active:scale-95"><div class="w-16 h-16 bg-white/[0.04] rounded-[24px] flex items-center justify-center text-4xl border border-white/5 group-hover/btn:bg-amber-500/20 shadow-xl transition-colors">ğŸ¬</div><span class="precision-tag opacity-40 group-hover/btn:opacity-100 text-amber-500/80">Film</span></button>
                    <button onclick="GardenOS.ui.search('Vista')" class="flex flex-col items-center gap-5 group/btn cursor-pointer transition-transform hover:scale-105 active:scale-95"><div class="w-16 h-16 bg-white/[0.04] rounded-[24px] flex items-center justify-center text-4xl border border-white/5 group-hover/btn:bg-amber-500/20 shadow-xl transition-colors">ğŸŒ²</div><span class="precision-tag opacity-40 group-hover/btn:opacity-100 text-amber-500/80">Vista</span></button>
                    <button onclick="GardenOS.ui.search('Audio')" class="flex flex-col items-center gap-5 group/btn cursor-pointer transition-transform hover:scale-105 active:scale-95"><div class="w-16 h-16 bg-white/[0.04] rounded-[24px] flex items-center justify-center text-4xl border border-white/5 group-hover/btn:bg-amber-500/20 shadow-xl transition-colors">ğŸ“»</div><span class="precision-tag opacity-40 group-hover/btn:opacity-100 text-amber-500/80">Audio</span></button>
                </div>
            </div>

            <!-- M6: èµ„äº§ç»ˆç«¯ -->
            <div class="glass-cell card-m6 min-h-[500px] overflow-hidden">
                <div class="flex justify-between items-start mb-12">
                    <span class="precision-tag text-white/30 tracking-[4em] uppercase">Wealth_Pulse</span>
                    <div class="flex items-center gap-3">
                         <button onclick="GardenOS.ui.switchChart('pie')" id="btnPie" class="text-[10px] text-amber-500 font-bold">DISTRIBUTION</button>
                         <span class="text-white/20">|</span>
                         <button onclick="GardenOS.ui.switchChart('trend')" id="btnTrend" class="text-[10px] text-white/50 font-bold">TREND</button>
                    </div>
                </div>
                <div class="flex flex-col lg:flex-row gap-12 h-full items-center">
                    <!-- å·¦ä¾§ï¼šåŠ¨æ€èµ„äº§åˆ—è¡¨ -->
                    <div id="assetList" class="w-full lg:w-5/12 flex flex-col gap-3 h-full overflow-y-auto custom-scroll max-h-[300px] pr-2">
                        <!-- JS è‡ªåŠ¨å¡«å…… -->
                    </div>
                    
                    <!-- å³ä¾§ï¼šå¯è§†åŒ–æ ¸å¿ƒ -->
                    <div id="vizContainer" class="w-full lg:w-7/12 bg-black/40 rounded-[48px] border border-white/5 relative overflow-hidden flex flex-col items-center justify-center p-8 min-h-[340px]">
                        <!-- åŠ¨æ€é¥¼å›¾ -->
                        <div id="pieChart" class="chart-wrapper">
                            <div class="pie-chart shadow-2xl"></div>
                            <div class="absolute text-center z-20 pointer-events-none">
                                <span class="text-2xl font-mono font-black text-white block tracking-tighter" id="totalAssetValue">0</span>
                                <span class="text-[9px] text-white/40 uppercase tracking-[0.3em] font-mono">Total_Stubs</span>
                            </div>
                            <!-- æ‚¬æµ®å›¾ä¾‹ -->
                            <div class="absolute bottom-[-20px] left-0 w-full flex justify-center gap-4 text-[9px] font-mono opacity-60">
                                <span class="flex items-center gap-1"><i class="ri-checkbox-blank-fill text-amber-500"></i> FUNDS</span>
                                <span class="flex items-center gap-1"><i class="ri-checkbox-blank-fill text-purple-500"></i> STOCKS</span>
                                <span class="flex items-center gap-1"><i class="ri-checkbox-blank-fill text-emerald-500"></i> CRYPTO</span>
                                <span class="flex items-center gap-1"><i class="ri-checkbox-blank-fill text-blue-500"></i> METAL</span>
                            </div>
                        </div>
                        
                        <!-- è¶‹åŠ¿å›¾ -->
                        <div id="trendChart" class="chart-wrapper hidden w-full h-full p-4 relative">
                            <svg class="w-full h-full overflow-visible" viewBox="0 0 300 150" id="trendSvg">
                                <path id="trendArea" fill="rgba(227, 179, 65, 0.05)" d=""/>
                                <polyline id="trendLine" fill="none" stroke="#e3b341" stroke-width="2" points=""/>
                            </svg>
                            <div id="xAxisLabels" class="absolute bottom-2 left-0 w-full flex justify-between px-2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- FAB -->
        <div id="fabPublish" onclick="GardenOS.ui.toggleWatcher(true)" class="fab-publish"><i class="ri-add-line"></i></div>
    </div>

    <!-- ä¾§è¾¹æ ï¼šå‘å¸ƒä¸­å¿ƒ (å…¨å­—æ®µå›å½’) -->
    <aside id="watcherDrawer" class="fixed top-0 right-[-100%] h-full bg-[#0c0b0a]/98 backdrop-blur-3xl border-l border-white/10 z-[200] transition-all duration-1000 p-12 flex flex-col shadow-3xl overflow-y-auto w-full md:w-[520px]">
        <div class="flex justify-between items-center mb-12">
            <h2 class="text-3xl font-serif italic font-black tracking-[0.2em] text-white">COMMAND_CTR</h2>
            <button onclick="GardenOS.ui.toggleWatcher(false)" class="p-4 text-2xl text-gray-500 hover:text-white">âœ•</button>
        </div>
        <div id="adminPostArea" class="hidden space-y-6">
            <p class="precision-tag text-amber-500">// Execute_New_Stub</p>
            <select id="postTarget" class="w-full bg-black/60 border border-white/10 rounded-xl p-5 text-xs text-white focus:border-amber-500 outline-none">
                <option value="memo">ç¢ç¢å¿µ</option>
                <option value="writing">å†™ä½œåŒº (éœ€é“¾æ¥)</option>
                <option value="ingest">æ‘„å…¥åŒº (éœ€å°é¢)</option>
                <option value="assets">èµ„äº§åˆ†ç±» (01-04)</option>
                <option value="status">ç”Ÿå‘½ä½“å¾</option>
            </select>
            <input type="text" id="postTitle" class="w-full bg-black/60 border border-white/10 rounded-xl p-5 text-xs text-white" placeholder="TITLE / CLASSIFICATION (e.g. 01 // FUNDS)">
            
            <!-- æ¢å¤çš„é“¾æ¥å­—æ®µ -->
            <div class="grid grid-cols-2 gap-4">
                <input type="text" id="postLinkText" class="bg-black/60 border border-white/10 rounded-xl p-5 text-xs text-white" placeholder="TAG / LABEL">
                <input type="text" id="postLinkUrl" class="bg-black/60 border border-white/10 rounded-xl p-5 text-xs text-white" placeholder="URL (https://...)">
            </div>

            <!-- æ¢å¤çš„å›¾ç‰‡/æ•°å€¼æ··åˆå­—æ®µ -->
            <input type="text" id="postValue" class="w-full bg-black/60 border border-white/10 rounded-xl p-5 text-xs text-white" placeholder="IMAGE_URL (Cover) OR NUMERIC VALUE (Asset)">
            
            <textarea id="postContent" class="w-full bg-black/60 border border-white/10 rounded-xl p-5 text-xs text-white h-32" placeholder="DESCRIPTION / CONTENT..."></textarea>
            <button onclick="GardenOS.cms.createPost()" class="w-full py-5 bg-amber-500 text-black font-black uppercase tracking-[0.8em] text-[10px] rounded-2xl active:scale-95 transition-all">EXECUTE_PUBLISH</button>
        </div>
    </aside>

    <div id="loginModal" class="fixed inset-0 bg-black/98 z-[500] hidden items-center justify-center p-6 backdrop-blur-3xl">
        <div class="bg-[#0c0d11] p-12 rounded-[56px] border border-white/10 w-full max-w-md text-center shadow-3xl">
            <span class="precision-tag mb-10 block text-amber-500">Root_Identity_Auth</span>
            <input type="password" id="authKeyInput" class="w-full bg-white/5 border border-white/10 rounded-[32px] p-8 text-center text-2xl font-mono text-white mb-10 outline-none">
            <div class="flex gap-5"><button onclick="GardenOS.ui.toggleLogin(false)" class="flex-1 text-[10px] uppercase opacity-40">Abort</button><button onclick="GardenOS.auth.verify()" class="flex-1 py-6 bg-white/5 border border-white/10 rounded-[24px] text-amber-500 text-[11px] font-bold">Connect</button></div>
        </div>
    </div>

    <script>
        /* --- å…¨ç¯å¢ƒæ„ŸçŸ¥å¼•æ“é…ç½® --- */
        const ASSET_MANIFEST = {
            spring: { morning: ['1490750967868-88aa4486c946'], noon: ['1500530855697-b586d89ba3ee'], sunset: ['1493244040629-496f6d136cc8'], night: ['1502082553048-f009c37129b9'] },
            summer: { morning: ['1501004318641-b39e6451bec6'], noon: ['1507525428034-b723cf961d3e'], sunset: ['1501973801540-537f08ccae7b'], night: ['1502082553048-f009c37129b9'] },
            autumn: { morning: ['1500534314209-a26db0f5b2c1'], noon: ['1476820865390-c52aeebb9891'], sunset: ['1501975558162-0be7c1c2d46a'], night: ['1478144592103-25e218a04891'] },
            winter: { morning: ['1483921020237-603db42bf712'], noon: ['1517299321609-52c1da131a1f'], sunset: ['1519757609205-09d577484df8'], night: ['1518536862590-b0c6096054d5', '1478131143081-80f7f84ca84d'] }
        };

        const GardenOS = {
            config: { secret: 'Zjx207661', storageKey: 'garden_v62_4_db' },
            state: { season: 'winter', phase: 'night', activeLayer: 1, isAuthorized: false },
            data: {
                defaultAssets: [
                    {title: '01 // FUNDS', content: '700.00', val: 700, color: '#e3b341'},
                    {title: '02 // STOCKS', content: '0.00', val: 0, color: '#a855f7'},
                    {title: '03 // CRYPTO', content: '150.00', val: 150, color: '#10b981'},
                    {title: '04 // METAL', content: '60.00 GR', val: 60, color: '#3b82f6'}
                ],
                defaultWriting: [
                    { title: "é“œå·å¾€äº‹", content: "è¢«æŠ˜å çš„æ—¶é—´ç¢ç‰‡ï¼Œä¸ªä½“åœ¨å®å¤§å™äº‹ç¼éš™ä¸­çš„å‘¼å¸ã€‚", tag: "Novel", url: "#", date: "2024" }
                ]
            },

            boot() {
                this.environment.init();
                this.auth.init();
                this.cms.renderAll();
                this.ui.init();
                document.body.classList.remove('opacity-0');
            },

            environment: {
                init() {
                    this.updateState();
                    this.syncBackground(true);
                    SeasonParticleEngine.init();
                    TimeColorEngine.init();
                    SkyEngine.init();
                    setInterval(() => this.tick(), 1000);
                    setInterval(() => this.syncBackground(false), 60000);
                },
                tick() {
                    const now = new Date();
                    document.getElementById('clockDisplay').innerText = now.toLocaleTimeString('zh-CN', { hour12: false });
                    this.updateState();
                },
                updateState() {
                    const now = new Date();
                    const m = now.getMonth() + 1;
                    const h = now.getHours();
                    let s = (m >= 3 && m <= 5) ? 'spring' : (m >= 6 && m <= 8 ? 'summer' : (m >= 9 && m <= 11 ? 'autumn' : 'winter'));
                    let p = (h >= 5 && h < 10) ? 'morning' : (h >= 10 && h < 17 ? 'noon' : (h >= 17 && h < 19 ? 'sunset' : 'night'));
                    if (s !== GardenOS.state.season || p !== GardenOS.state.phase) {
                        GardenOS.state.season = s; GardenOS.state.phase = p;
                        document.getElementById('envStatusText').innerText = `${s.toUpperCase()}_CORE_v62.4`;
                        document.getElementById('seasonIndicator').title = s.toUpperCase();
                    }
                },
                syncBackground(force) {
                    const pool = ASSET_MANIFEST[GardenOS.state.season][GardenOS.state.phase];
                    const url = `https://images.unsplash.com/photo-${pool[Math.floor(Math.random() * pool.length)]}?auto=format&fit=crop&w=2400&q=80`;
                    const next = GardenOS.state.activeLayer === 1 ? 2 : 1;
                    const nextEl = document.getElementById(`bg-layer-${next}`);
                    const currentEl = document.getElementById(`bg-layer-${GardenOS.state.activeLayer}`);
                    const img = new Image(); img.src = url;
                    img.onload = () => {
                        nextEl.style.backgroundImage = `url('${url}')`;
                        nextEl.style.opacity = '1'; currentEl.style.opacity = '0';
                        GardenOS.state.activeLayer = next;
                    };
                }
            },

            ui: {
                init() {},
                toggleLogin(s) { document.getElementById('loginModal').style.display = s ? 'flex' : 'none'; },
                toggleWatcher(s) { document.getElementById('watcherDrawer').style.right = s ? '0' : '-100%'; },
                toggleDropdown(id) { document.getElementById(id).classList.toggle('active'); },
                toggleWritingDeck() { document.getElementById('writingCover').classList.toggle('hidden'); document.getElementById('writingList').classList.toggle('hidden'); },
                activateSearch() { document.getElementById('searchPill').style.width = '240px'; document.getElementById('headerSearchInput').classList.remove('hidden'); document.getElementById('headerSearchInput').focus(); },
                deactivateSearch() { if (!document.getElementById('headerSearchInput').value) { document.getElementById('headerSearchInput').classList.add('hidden'); document.getElementById('searchPill').style.width = '44px'; } },
                
                search(v) { 
                    // ç®€å•çš„å®¢æˆ·ç«¯æœç´¢/ç­›é€‰
                    const items = document.querySelectorAll('.searchable-item');
                    items.forEach(el => {
                        const text = el.innerText.toLowerCase();
                        if(text.includes(v.toLowerCase())) {
                            el.style.display = 'block';
                            el.classList.add('animate-slide-up');
                        } else {
                            el.style.display = 'none';
                        }
                    });
                    
                    // å¦‚æœæœç´¢æ¡†æ²¡æ‰“å¼€ï¼Œæ‰“å¼€å®ƒå¹¶å¡«å…¥å€¼ï¼ˆé’ˆå¯¹æŒ‰é’®ç‚¹å‡»ï¼‰
                    if(document.getElementById('searchPill').style.width !== '240px' && v !== '') {
                        this.activateSearch();
                        document.getElementById('headerSearchInput').value = v;
                    }
                },
                
                switchChart(t) {
                    document.getElementById('pieChart').classList.toggle('hidden', t !== 'pie');
                    document.getElementById('trendChart').classList.toggle('hidden', t !== 'trend');
                },
                drawCharts(assets) {
                    const pie = document.querySelector('.pie-chart');
                    const totalVal = assets.reduce((sum, a) => sum + a.val, 0);
                    document.getElementById('totalAssetValue').innerText = Math.round(totalVal);
                    
                    if (pie && totalVal > 0) {
                        let currentPerc = 0;
                        const gradientParts = assets.map(a => {
                            const perc = (a.val / totalVal) * 100;
                            const start = currentPerc;
                            currentPerc += perc;
                            return `${a.color} ${start}% ${currentPerc}%`;
                        });
                        pie.style.background = `conic-gradient(${gradientParts.join(', ')})`;
                    } else if (pie) {
                        pie.style.background = '#222';
                    }

                    // è¶‹åŠ¿å›¾æ¨¡æ‹Ÿ
                    const line = document.getElementById('trendLine');
                    const area = document.getElementById('trendArea');
                    const points = [120, 100, 110, 80, 90, 50, 60].map((y, x) => `${x*50},${y}`).join(' ');
                    if (line) line.setAttribute('points', points);
                    if (area) area.setAttribute('d', `M0,150 L${points} L300,150 Z`);
                }
            },

            cms: {
                renderAll() {
                    const d = JSON.parse(localStorage.getItem(GardenOS.config.storageKey) || '{}');
                    const posts = d.posts || [];
                    
                    // 1. æ¸²æŸ“èµ„äº§
                    const assetListEl = document.getElementById('assetList');
                    const userAssets = posts.filter(p => p.target === 'assets');
                    
                    const finalAssets = GardenOS.data.defaultAssets.map(def => {
                        const override = userAssets.find(u => u.title.includes(def.title.split(' // ')[0]));
                        if (override) {
                            return { ...def, content: override.value, val: parseFloat(override.value) || 0 };
                        }
                        return def;
                    });

                    assetListEl.innerHTML = finalAssets.map(a => `
                        <div class="asset-item group searchable-item">
                            <div class="flex items-center gap-3">
                                <div class="w-1.5 h-6 rounded-full" style="background:${a.color}"></div>
                                <span class="precision-tag opacity-40 group-hover:opacity-100 transition-all">${a.title}</span>
                            </div>
                            <span class="font-mono text-white/90 group-hover:text-amber-500">${a.content}</span>
                        </div>
                    `).join('');

                    GardenOS.ui.drawCharts(finalAssets);

                    // 2. æ¸²æŸ“æ‘„å…¥åŒº (æ”¯æŒå°é¢)
                    const ingestEl = document.getElementById('ingestList');
                    const userIngests = posts.filter(p => p.target === 'ingest');
                    const defaultIngest = `<div class="flex gap-4 items-start searchable-item"><div class="w-12 h-12 bg-white/10 rounded-xl overflow-hidden"><img src="https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=100" class="w-full h-full object-cover"></div><div><h4 class="text-xs font-bold font-serif">ã€ŠçŒ®ç»™é˜¿å°”å‰ä¾¬çš„èŠ±æŸã€‹</h4><p class="text-[9px] opacity-50">æ™ºæ…§æ˜¯å­¤ç‹¬çš„è§£è¯ã€‚</p></div></div>`;
                    
                    ingestEl.innerHTML = userIngests.length ? userIngests.map(p => {
                        const img = p.value && p.value.startsWith('http') ? `<img src="${p.value}" class="w-full h-full object-cover">` : `<div class="w-full h-full flex items-center justify-center font-mono text-[9px] opacity-50">BOOK</div>`;
                        return `<div class="flex gap-4 items-start searchable-item"><div class="w-12 h-12 bg-white/10 rounded-xl overflow-hidden border border-white/5">${img}</div><div><h4 class="text-xs font-bold">${p.title}</h4><p class="text-[9px] opacity-50">${p.content}</p></div></div>`;
                    }).join('') : defaultIngest;
                
                    // 3. æ¸²æŸ“å†™ä½œåŒº (æ”¯æŒé“¾æ¥)
                    const writingEl = document.getElementById('dynamicWritingContainer');
                    const userWritings = posts.filter(p => p.target === 'writing');
                    
                    let html = '';
                    
                    // é»˜è®¤æ–‡ç« 
                    html += `<a href="#" class="bg-black/90 p-10 rounded-[40px] border border-amber-500/20 hover:border-amber-500 block relative transform hover:-translate-y-2 searchable-item">
                        <div class="absolute top-0 left-0 w-1.5 h-full bg-amber-500 rounded-l-[40px]"></div>
                        <h4 class="text-2xl font-serif italic font-bold text-white mb-4">é“œå·å¾€äº‹</h4>
                        <p class="text-sm text-gray-400 font-serif leading-loose opacity-80">è¢«æŠ˜å çš„æ—¶é—´ç¢ç‰‡ï¼Œä¸ªä½“çš„å‘¼å¸ã€‚</p>
                        <div class="mt-8"><span class="text-[10px] border border-white/20 px-3 py-1 rounded-full text-white/40">Novel</span></div>
                    </a>`;
                    
                    userWritings.forEach(p => {
                        html += `<a href="${p.linkUrl || '#'}" target="_blank" class="bg-black/90 p-10 rounded-[40px] border border-white/10 hover:border-amber-500 block relative transform hover:-translate-y-2 transition-all searchable-item">
                            <div class="absolute top-0 left-0 w-1.5 h-full bg-white/20 rounded-l-[40px] group-hover:bg-amber-500"></div>
                            <h4 class="text-2xl font-serif italic font-bold text-white mb-4">${p.title}</h4>
                            <p class="text-sm text-gray-400 font-serif leading-loose opacity-80">${p.content}</p>
                            <div class="mt-8 flex gap-2">
                                <span class="text-[10px] border border-white/20 px-3 py-1 rounded-full text-white/40 uppercase">${p.linkText || 'Article'}</span>
                            </div>
                        </a>`;
                    });
                    
                    writingEl.innerHTML = html;

                    // 4. ç¢ç¢å¿µ
                    const memoEl = document.getElementById('memoList');
                    const userMemos = posts.filter(p => p.target === 'memo');
                    memoEl.innerHTML = userMemos.map(p => `<div class="bg-white/5 p-4 rounded-2xl border border-white/5 searchable-item"><p class="text-[11px] leading-relaxed opacity-70 italic">â€œ${p.content}â€</p></div>`).join('') || `<p class="text-[11px] opacity-30 italic text-center">æš‚æ— ç¢ç‰‡è®°å½•</p>`;
                },

                createPost() {
                    const target = document.getElementById('postTarget').value;
                    const title = document.getElementById('postTitle').value.trim();
                    const value = document.getElementById('postValue').value.trim(); // æ—¢å¯ä»¥åšæ•°å€¼ï¼Œä¹Ÿå¯ä»¥åšå›¾ç‰‡URL
                    const content = document.getElementById('postContent').value.trim();
                    const linkText = document.getElementById('postLinkText').value.trim();
                    const linkUrl = document.getElementById('postLinkUrl').value.trim();

                    if (!title && target === 'assets') return;

                    const d = JSON.parse(localStorage.getItem(GardenOS.config.storageKey) || '{}');
                    const posts = d.posts || [];
                    
                    // æ„é€ ç»Ÿä¸€å¯¹è±¡
                    posts.unshift({ 
                        id: Date.now(), 
                        target, 
                        title, 
                        value, // èµ„äº§æ•°å€¼ OR å›¾ç‰‡URL
                        content, 
                        linkText, 
                        linkUrl,
                        timestamp: new Date().toLocaleString() 
                    });
                    
                    d.posts = posts;
                    localStorage.setItem(GardenOS.config.storageKey, JSON.stringify(d));

                    // é‡ç½®è¾“å…¥
                    ['postTitle', 'postValue', 'postContent', 'postLinkText', 'postLinkUrl'].forEach(id => document.getElementById(id).value = '');
                    this.renderAll();
                }
            },

            auth: {
                init() {
                    const d = JSON.parse(localStorage.getItem(GardenOS.config.storageKey) || '{}');
                    if (d.isAuthorized) this.updateUI(true);
                },
                verify() {
                    if (document.getElementById('authKeyInput').value === GardenOS.config.secret) {
                        const d = JSON.parse(localStorage.getItem(GardenOS.config.storageKey) || '{}');
                        d.isAuthorized = true; localStorage.setItem(GardenOS.config.storageKey, JSON.stringify(d));
                        this.updateUI(true); GardenOS.ui.toggleLogin(false);
                    }
                },
                updateUI(auth) {
                    if (auth) {
                        GardenOS.state.isAuthorized = true;
                        document.getElementById('lockIcon').className = 'ri-shield-user-line text-amber-500';
                        document.getElementById('adminPostArea').classList.remove('hidden');
                        document.getElementById('fabPublish').classList.add('visible');
                    }
                }
            },

            api: {
                async handleAIInput(e) {
                    if (e.key === 'Enter') {
                        const log = document.getElementById('aiChatLog');
                        const val = e.target.value;
                        log.innerHTML += `<div class="text-white">> ${val}</div>`;
                        e.target.value = '';
                        log.innerHTML += `<div class="text-amber-500 opacity-50 font-mono">NEURAL_LINK_STUB: æ­£åœ¨å¤„ç†ä¿¡å·...</div>`;
                    }
                }
            }
        };

        /* --- ç²’å­/å¤©ç©º/è‰²æ¸©å¼•æ“ --- */
        const SeasonParticleEngine = {
            canvas: null, ctx: null, particles: [], season: null,
            init() { this.canvas = document.getElementById('season-particles'); this.ctx = this.canvas.getContext('2d'); this.resize(); window.addEventListener('resize', () => this.resize()); this.loop(); },
            resize() { this.canvas.width = innerWidth; this.canvas.height = innerHeight; },
            loop() {
                requestAnimationFrame(() => this.loop());
                if (this.season !== GardenOS.state.season) {
                    this.season = GardenOS.state.season; this.particles = [];
                    const count = { spring: 30, summer: 20, autumn: 40, winter: 60 }[this.season] || 20;
                    for (let i = 0; i < count; i++) this.particles.push({ x: Math.random() * innerWidth, y: Math.random() * innerHeight, vy: Math.random() * 0.6 + 0.2, r: Math.random() * 2 + 1, c: { spring: 'rgba(255,200,220,0.4)', summer: 'rgba(255,255,200,0.3)', autumn: 'rgba(200,120,60,0.4)', winter: 'rgba(255,255,255,0.6)' }[this.season] });
                }
                this.ctx.clearRect(0, 0, innerWidth, innerHeight);
                this.particles.forEach(p => { p.y += p.vy; if (p.y > innerHeight) p.y = -10; this.ctx.fillStyle = p.c; this.ctx.beginPath(); this.ctx.arc(p.x, p.y, p.r, 0, 7); this.ctx.fill(); });
            }
        };
        const TimeColorEngine = { el: null, map: { morning: 'rgba(255,200,100,0.1)', noon: 'rgba(255,255,255,0)', sunset: 'rgba(255,100,0,0.15)', night: 'rgba(0,20,100,0.25)' }, init() { this.el = document.getElementById('time-color-filter'); setInterval(() => this.el.style.backgroundColor = this.map[GardenOS.state.phase], 5000); } };
        const SkyEngine = {
            canvas: null, ctx: null, mode: null, elements: [],
            init() { this.canvas = document.getElementById('sky-layer'); this.ctx = this.canvas.getContext('2d'); this.resize(); this.loop(); },
            resize() { this.canvas.width = innerWidth; this.canvas.height = innerHeight; },
            loop() {
                requestAnimationFrame(() => this.loop());
                const m = (GardenOS.state.phase === 'night') ? 'stars' : (['morning', 'noon'].includes(GardenOS.state.phase) ? 'clouds' : 'none');
                if (m !== this.mode) {
                    this.mode = m; this.elements = [];
                    if (m === 'stars') for (let i = 0; i < 60; i++) this.elements.push({ x: Math.random() * innerWidth, y: Math.random() * innerHeight, r: Math.random() * 1.2, a: Math.random(), da: 0.01 });
                }
                this.ctx.clearRect(0, 0, innerWidth, innerHeight);
                if (this.mode === 'stars') this.elements.forEach(s => { s.a += s.da; if (s.a > 1 || s.a < 0) s.da *= -1; this.ctx.fillStyle = `rgba(255,255,255,${Math.abs(s.a)})`; this.ctx.beginPath(); this.ctx.arc(s.x, s.y, s.r, 0, 7); this.ctx.fill(); });
            }
        };

        window.onload = () => GardenOS.boot();
    </script>
</body>
</html>
